Babble messaging server
=======================

Introduction
------------

**babble.server** is a messaging service for Zope2 based systems.

It's the messaging server used by *babble.client*, an instant messaging
client for Plone. However, it doesn't have any dependencies on Plone or
*babble.client* and is designed to be usable independent of the frontend client.

Features
--------

- **User accounts:** users must be registered for the chat service
- **Security:** most messaging actions requires the user to authenticate 
- **User status support:** users can set their status, such as 'busy', 'chatty' or
  'invisible'.
- **Web service:** all public API methods return JSON strings.
- **Tests:** 100% test coverage.


Setup
-----

The chatserver is designed to be a standalone and lightweight Zope2 app. It doesn't depend
on Plone at all.

It's best to run the server with it's own ZODB instance, separate from the
client.

For example::

    [buildout]
    parts += chatserver

    [chatserver]
    recipe = plone.recipe.zope2instance
    http-address = 8081
    zeo-client = off
    shared-blob = off
    user = admin:admin
    file-storage = filestorage/DataChat.fs
    blob-storage = var/blobstorage-chat
    eggs = babble.server
    zcml = babble.server

.. note::
    It's important to include the zcml slug for babble.server.

Usage
-----

Simply add the *Chat Service* in the ZMI (Zope Management Interface) by clicking
on the dropdown box and choosing it from the list.


.. figure::  ../images/Screenshot-2.png
   :align:   center

API
---

For a detailed look at the API methods with a description of each ones 
purpose and the JSON values it returns, please see the 
`interfaces.py <http://svn.plone.org/svn/collective/babble.server/trunk/babble/server/interfaces.py>`_
module.

The current API methods are:

    * confirmAsOnline(username)
    * register(username, password)
    * isRegistered(username)
    * setUserPassword(username, password)
    * getOnlineUsers()
    * setStatus(username, password, status)
    * getStatus(username)
    * sendMessage(username, password, recipient, message)
    * getUnreadMessages(username, password, read=True)
    * getUnclearedMessages(username, password, sender=None, read=True, clear=False)


